"use strict";const e=require("../../common/vendor.js"),t=require("../../api/juhe.js"),a=require("../../store/index.js"),o=require("../../utils/utils.js");if(require("../../utils/http/index.js"),require("../../utils/auth/index.js"),require("../../enum/cacheEnum.js"),require("../../utils/http/http.js"),require("../../config/index.js"),require("../../hooks/useEnv.js"),require("../../utils/http/helper.js"),require("../../utils/cache/index.js"),!Array){(e.resolveComponent("uni-tag")+e.resolveComponent("van-collapse-item")+e.resolveComponent("van-collapse")+e.resolveComponent("van-calendar")+e.resolveComponent("van-button"))()}Math;const s={__name:"remaining",setup(s){const n=e.ref(!1);e.ref(new Date(2e3,0,1).getTime()),e.ref(new Date(2050,11,31).getTime());const i=e.ref([]),r=e.ref(["1"]),l=new Map,u=a.useStore(),c=t=>{const a=e.dayjs(t.date).format("M月D号"),o=e.dayjs(t.date).format("YYYY-MM-DD");return l.has(a)?(t.bottomInfo=l.get(a),t.className="festival"):l.has(o)&&(t.bottomInfo=l.get(o),t.className="festival"),t};return e.onShow((async()=>{if(o.msg.loading(),e.lodashExports.isEmpty(u.vacation)){const a=await t.getVacationList(e.dayjs().year());u.setVacation(a.list)}const a=e.lodashExports.cloneDeep(u.vacation);i.value=a.map((e=>{var t;return l.set(e.holiday,e.name),e.vacation=e.vacation?null==(t=e.vacation)?void 0:t.split("|"):[],e.vacation.forEach((e=>{l.set(e,"假期")})),e})),o.msg.hide()})),e.onShareAppMessage((e=>("button"===e.from&&console.log(e.target),{title:"假期查询",imageUrl:"/static/remaining.png",path:"/pages/remaining/remaining",desc:"假期查询，假期安排，请假助手"}))),(t,a)=>e.e({a:e.f(i.value,((t,a,o)=>({a:e.t(t.tip),b:e.f(t.vacation,((t,a,s)=>({a:"5fd878ec-2-"+o+"-"+s+",5fd878ec-1-"+o,b:e.p({text:t,size:"small",type:"primary"}),c:t}))),c:e.t(t.rest),d:t.name,e:"5fd878ec-1-"+o+",5fd878ec-0",f:e.p({title:t.name+" "+t.holiday,name:t.holiday})}))),b:e.o((e=>r.value=e.detail)),c:e.p({value:r.value}),d:n.value},n.value?{e:e.o((e=>n.value=!1)),f:e.p({show:!0,formatter:c})}:{},{g:e.o((()=>n.value=!0)),h:e.p({type:"primary",block:!0})})},__runtimeHooks:2};wx.createPage(s);
