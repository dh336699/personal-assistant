"use strict";const e=require("../../common/vendor.js"),a=require("../../api/juhe.js"),t=require("../../store/index.js"),o=require("../../utils/utils.js");if(require("../../utils/http/index.js"),require("../../utils/auth/index.js"),require("../../enum/cacheEnum.js"),require("../../utils/http/http.js"),require("../../config/index.js"),require("../../hooks/useEnv.js"),require("../../utils/http/helper.js"),require("../../utils/cache/index.js"),!Array){(e.resolveComponent("uni-tag")+e.resolveComponent("van-collapse-item")+e.resolveComponent("van-collapse")+e.resolveComponent("van-calendar")+e.resolveComponent("van-button"))()}Math;const s={__name:"remaining",setup(s){const n=e.ref(!1);e.ref(new Date(2e3,0,1).getTime()),e.ref(new Date(2050,11,31).getTime());const i=e.ref([]),r=e.ref(["1"]),l=new Map,u=t.useStore(),c=a=>{const t=e.dayjs(a.date).format("M月D号"),o=e.dayjs(a.date).format("YYYY-MM-DD");return l.has(t)?(a.bottomInfo=l.get(t),a.className="festival"):l.has(o)&&(a.bottomInfo=l.get(o),a.className="festival"),a};return e.onShow((async()=>{if(o.msg.loading(),e.lodashExports.isEmpty(u.vacation)){const t=await a.getVacationList(e.dayjs().year());u.setVacation(t.list)}const t=e.lodashExports.cloneDeep(u.vacation);i.value=t.map((e=>{var a;return l.set(e.holiday,e.name),e.vacation=e.vacation?null==(a=e.vacation)?void 0:a.split("|"):[],e.vacation.forEach((e=>{l.set(e,"假期")})),e})),o.msg.hide()})),e.onShareAppMessage((e=>("button"===e.from&&console.log(e.target),{title:"假期查询",imageUrl:"/static/remaining.png",path:"/pages/remaining/remaining",desc:"假期查询，假期安排，请假助手"}))),(a,t)=>e.e({a:e.f(i.value,((a,t,o)=>({a:e.t(a.tip),b:e.f(a.vacation,((a,t,s)=>({a:"4a7bc74a-2-"+o+"-"+s+",4a7bc74a-1-"+o,b:e.p({text:a,size:"small",type:"primary"}),c:a}))),c:e.t(a.rest),d:a.name,e:"4a7bc74a-1-"+o+",4a7bc74a-0",f:e.p({title:a.name+" "+a.holiday,name:a.holiday})}))),b:e.o((e=>r.value=e.detail)),c:e.p({value:r.value}),d:n.value},n.value?{e:e.o((e=>n.value=!1)),f:e.p({show:!0,formatter:c})}:{},{g:e.o((()=>n.value=!0)),h:e.p({type:"primary",block:!0})})},__runtimeHooks:2};wx.createPage(s);
