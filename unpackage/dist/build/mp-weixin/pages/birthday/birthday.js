"use strict";const e=require("../../common/vendor.js"),r=require("../../api/juhe.js"),l=require("../../utils/utils.js"),a=require("../../store/index.js");if(require("../../utils/http/index.js"),require("../../utils/auth/index.js"),require("../../enum/cacheEnum.js"),require("../../utils/http/http.js"),require("../../config/index.js"),require("../../hooks/useEnv.js"),require("../../utils/http/helper.js"),require("../../utils/cache/index.js"),!Array){(e.resolveComponent("uni-section")+e.resolveComponent("van-datetime-picker")+e.resolveComponent("van-popup")+e.resolveComponent("van-field"))()}Math;const u={__name:"birthday",setup(u){const o=a.useStore(),t=e.ref(!1),i=e.reactive({year:{value:void 0,required:!0,validate:r=>r>e.dayjs().year()||r<e.dayjs().subtract(100,"year").year()?`年份不得小于${e.dayjs().subtract(100,"year").year()} ，不得大于${e.dayjs().year()}`:"",label:"出生年份",error:""},month:{value:void 0,required:!0,validate:e=>e>=1&&e<=12?"":"月份不得小于1 ，不得大于12",label:"出生月份",error:""},day:{value:void 0,required:!0,validate:e=>e>=1&&e<=31?"":"日期不得小于1 ，不得大于31",label:"出生日期",error:""},hour:{value:void 0,required:!0,validate:e=>e>=0&&e<=24?"":"出生小时不得小于0 ，不得大于24",label:"出生时辰(24小时制)",error:""}}),v=e.ref(e.dayjs().valueOf()),n=e.ref(e.dayjs().subtract(100,"year").valueOf()),d=e.ref(e.dayjs().subtract(20,"year").valueOf()),s=e.ref(),y=e.computed((()=>e.unref(s)?e.dayjs(e.unref(d)).format("YYYY-MM-DD HH:mm"):"可以在下方手动输入，也可以点此进行选择出生日期")),h=e.computed((()=>e.unref(s)?`${e.unref(s).cYear}-${e.unref(s).cMonth}-${e.unref(s).cDay}`:"")),m=e.computed((()=>e.unref(s)?`${e.unref(s).year}-${e.unref(s).month}-${e.unref(s).day}`:"")),c=async(r,l)=>{const a=r.detail.value;if(i[l].value=a>=0?Number(a):void 0,i.year.value>0&&i.month.value>0&&i.day.value>0&&i.hour.value>0){const r=await p();e.lodashExports.isEmpty(r)||(d.value=e.dayjs(`${r.year}-${r.month}-${r.day} ${r.hour}`).valueOf(),await b(r.year,r.month,r.day,r.hour))}},p=async()=>{let e=!1;const r={};for(let l in i){const a=i[l];a.error="",a.required&&!a.value?a.error=`${a.label}为必填项哦`:a.validate&&(a.error=a.validate(a.value)),a.error?e=!0:r[l]=a.value}return e?Promise.reject("请检查输入的数据"):Promise.resolve(r)},f=async r=>{d.value=r.detail;const l=e.dayjs(e.unref(d)),a=l.year(),u=l.month()+1,o=l.date(),t=l.hour();i.year.value=a,i.year.error="",i.month.value=u,i.month.error="",i.day.value=o,i.day.error="",i.hour.value=t,i.hour.error="",await b(a,u,o,t)},b=async(a,u,i,v)=>{const n=`${a}-${u}-${i} ${v}`;t.value=!1,o.birthday[n]?s.value=o.birthday[n]:(l.msg.loading(),s.value=await r.getBirth({year:a,month:u,day:i,hour:v}),o.setBirthday(n,e.unref(s)),l.msg.hide())};return(r,l)=>{var a,u,o,p,b,j,q,g,$,A,x,C,M,w,D,_,E,I,Y,k,O,B,H,P;return e.e({a:e.o((e=>t.value=!0)),b:e.p({title:e.unref(y),type:"line"}),c:e.o((e=>t.value=!1)),d:e.o(f),e:e.p({visibleItemCount:5,type:"datetime",minDate:n.value,maxDate:v.value,value:d.value}),f:e.o((e=>t.value=!1)),g:e.p({show:t.value,position:"bottom",customStyle:"height: 50%;"}),h:e.o((e=>c(e,"year"))),i:e.o((e=>c(e,"year"))),j:e.p({value:i.year.value,label:i.year.label,type:"number",required:!0,placeholder:"请输入"+i.year.label,errorMessage:i.year.error}),k:e.o((e=>c(e,"month"))),l:e.o((e=>c(e,"month"))),m:e.p({value:i.month.value,type:"number",required:!0,label:i.month.label,placeholder:"请输入"+i.month.label,errorMessage:i.month.error}),n:e.o((e=>c(e,"day"))),o:e.o((e=>c(e,"day"))),p:e.p({value:i.day.value,type:"number",required:!0,label:i.day.label,placeholder:"请输入"+i.day.label,errorMessage:i.day.error}),q:e.o((e=>c(e,"hour"))),r:e.o((e=>c(e,"hour"))),s:e.p({value:i.hour.value,type:"number",required:!0,label:i.hour.label,placeholder:"请输入"+i.hour.label,errorMessage:i.hour.error}),t:s.value},s.value?e.e({v:e.t(e.unref(h)),w:e.t(null==(a=s.value)?void 0:a.ncWeek),x:e.t(e.unref(m)),y:e.t(null==(u=s.value)?void 0:u.ImonthCn),z:e.t(null==(o=s.value)?void 0:o.IDayCn),A:s.value.isTerm},s.value.isTerm?{B:e.t(null==(p=s.value)?void 0:p.Term)}:{},{C:e.t(null==(b=s.value)?void 0:b.Animal),D:e.t(null==(j=s.value)?void 0:j.astro),E:e.t(null==($=null==(g=null==(q=s.value)?void 0:q.eightAll)?void 0:g.eight)?void 0:$.join(", ")),F:null==(x=null==(A=s.value)?void 0:A.eightAll)?void 0:x.shu},(null==(M=null==(C=s.value)?void 0:C.eightAll)?void 0:M.shu)?{G:e.t(null==(D=null==(w=s.value)?void 0:w.eightAll)?void 0:D.shu)}:{},{H:e.t(null==(I=null==(E=null==(_=s.value)?void 0:_.fiveAll)?void 0:E.five)?void 0:I.join(", ")),I:null==(k=null==(Y=s.value)?void 0:Y.fiveAll)?void 0:k.lose},(null==(B=null==(O=s.value)?void 0:O.fiveAll)?void 0:B.lose)?{J:e.t(null==(P=null==(H=s.value)?void 0:H.fiveAll)?void 0:P.lose)}:{}):{})}}},o=e._export_sfc(u,[["__scopeId","data-v-29a8a1d6"]]);wx.createPage(o);
